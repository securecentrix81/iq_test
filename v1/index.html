<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Centrix81 IQ Test</title>
    <style>
      body { font-family: sans-serif; background: #f4f4f9; display: flex; justify-content: center; padding: 20px; }
      #quiz-container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 600px; width: 100%; text-align: center; }
      .image-wrapper img { max-width: 100%; height: auto; border: 1px solid #ddd; margin-bottom: 1rem; max-height: 50vh; padding: 10px; }
      #answer-list { list-style: none; padding: 0; margin: 20px 0; }
      .answer-item { 
        background: #e7e7ff; padding: 12px; margin-bottom: 8px; border-radius: 4px; 
        cursor: pointer; transition: 0.2s; border: 2px solid transparent;
      }
      .answer-item:hover { background: #d0d0ff; }
      .correct { border-color: #2ecc71; background: #d4efdf !important; }
      .incorrect { border-color: #e74c3c; background: #f2d7d5 !important; }
      .hidden { display: none; }
      #feedback-container { margin-top: 20px; padding: 15px; border-top: 1px solid #eee; text-align: left }
      #next-btn { background: #3498db; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }

      .matrix {
        margin: 15px 0;
        border-collapse: collapse;
      }
      
      .matrix td {
        padding: 5px;
        text-align: center;
        vertical-align: middle;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>

    <div id="quiz-container">
      <h1 id="quiz-title">IQ Assessment</h1>

      <!-- Main Image Container -->
      <div class="image-wrapper">
        <img id="test-image" src="" alt="IQ Test Pattern">
      </div>

      <div id="question-text">Select the correct answer:</div>

      <!-- Answer List -->
      <ul id="answer-list"></ul>

      <!-- Feedback Area -->
      <div id="feedback-container" class="hidden">
        <p id="feedback-text"></p>
        <button id="next-btn" onclick="nextQuestion()">Next Question</button>
      </div>

      <div id="score-container" class="hidden">
        <h2>Test Complete!</h2>
        <p id="final-score"></p>
        <button onclick="location.reload()">Restart</button>
      </div>
    </div>

    <script>
      let q3Tables = {
        matrix: {
          life: `<table class="matrix"><tr><td><table class="matrix"><tr><td class="fill-black"><td><td><td><tr><td><td class="fill-black"><td class="fill-black"><td><tr><td class="fill-black"><td class="fill-black"><td><td><tr><td><td><td><td></table><td><table class="matrix"><tr><td><td class="fill-black"><td><td><tr><td><td><td class="fill-black"><td><tr><td class="fill-black"><td class="fill-black"><td class="fill-black"><td><tr><td><td><td><td></table><td><table class="matrix"><tr><td><td><td><td><tr><td class="fill-black"><td><td class="fill-black"><td><tr><td><td class="fill-black"><td class="fill-black"><td><tr><td><td class="fill-black"><td><td></table><tr><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td class="fill-black"><td><tr><td class="fill-black"><td><td class="fill-black"><td><tr><td><td class="fill-black"><td class="fill-black"><td></table><td><table class="matrix"><tr><td><td><td><td><tr><td><td class="fill-black"><td><td><tr><td><td><td class="fill-black"><td class="fill-black"><tr><td><td class="fill-black"><td class="fill-black"><td></table><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td class="fill-black"><td><tr><td><td><td><td class="fill-black"><tr><td><td class="fill-black"><td class="fill-black"><td class="fill-black"></table><tr><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td class="fill-black"><td><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table><td>?</table> <!-- matrix mapped with game of life -->`,
          stacking: `<table class="matrix"><tr><td><table class="matrix"><tr><td class="fill-black"><td class="fill-gray"><td><td><tr><td class="fill-black"><td class="fill-gray"><td class="fill-gray"><td><tr><td class="fill-black"><td class="fill-gray"><td><td><tr><td class="fill-black"><td><td><td></table><td><table class="matrix"><tr><td><td class="fill-gray"><td class="fill-gray"><td class="fill-black"><tr><td><td class="fill-gray"><td class="fill-gray"><td class="fill-black"><tr><td class="fill-gray"><td class="fill-gray"><td class="fill-gray"><td class="fill-black"><tr><td><td><td><td class="fill-black"></table><td><table class="matrix"><tr><td class="fill-black"><td><td><td><tr><td class="fill-black"><td><td class="fill-gray"><td><tr><td class="fill-black"><td class="fill-gray"><td class="fill-gray"><td><tr><td class="fill-black"><td class="fill-gray"><td class="fill-gray"><td></table><tr><td><table class="matrix"><tr><td><td><td class="fill-black"><td class="fill-gray"><tr><td><td><td class="fill-black"><td><tr><td class="fill-gray"><td><td class="fill-black"><td><tr><td><td class="fill-gray"><td class="fill-black"><td></table><td><table class="matrix"><tr><td class="fill-gray"><td class="fill-black"><td><td class="fill-gray"><tr><td><td class="fill-black"><td class="fill-gray"><td><tr><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><td class="fill-gray"><tr><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><td class="fill-gray"></table><td><table class="matrix"><tr><td><td><td class="fill-black"><td><tr><td><td><td class="fill-black"><td><tr><td class="fill-gray"><td><td class="fill-black"><td class="fill-gray"><tr><td><td class="fill-gray"><td class="fill-black"><td class="fill-gray"></table><tr><td><table class="matrix"><tr><td><td class="fill-black"><td><td><tr><td><td class="fill-black"><td><td><tr><td><td class="fill-black"><td><td class="fill-gray"><tr><td><td class="fill-black"><td class="fill-gray"><td class="fill-gray"></table><td><table class="matrix"><tr><td class="fill-gray"><td><td class="fill-black"><td class="fill-gray"><tr><td class="fill-gray"><td class="fill-gray"><td class="fill-black"><td><tr><td class="fill-gray"><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><tr><td><td class="fill-gray"><td class="fill-black"><td class="fill-gray"></table><td>?</table> <!-- matrix with mapped stacking -->`,
        },
        options: {
          stacking: `<table class="matrix"><tr><td><table class="matrix"><tr><td class="fill-gray"><td><td class="fill-gray"><td><tr><td><td class="fill-gray"><td><td class="fill-gray"><tr><td class="fill-gray"><td class="fill-gray"><td class="fill-gray"><td class="fill-gray"><tr><td><td class="fill-gray"><td class="fill-gray"><td class="fill-gray"></table><td><table class="matrix"><tr><td><td class="fill-black"><td><td><tr><td><td class="fill-black"><td><td><tr><td><td class="fill-black"><td><td class="fill-gray"><tr><td><td class="fill-black"><td class="fill-gray"><td class="fill-gray"></table><td><table class="matrix"><tr><td class="fill-black"><td class="fill-gray"><td class="fill-black"><td><tr><td class="fill-black"><td><td class="fill-black"><td class="fill-gray"><tr><td class="fill-black"><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><tr><td class="fill-black"><td><td class="fill-black"><td></table><td><table class="matrix"><tr><td class="fill-gray"><td class="fill-black"><td><td class="fill-gray"><tr><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><td><tr><td class="fill-gray"><td class="fill-black"><td class="fill-gray"><td class="fill-gray"><tr><td><td class="fill-black"><td class="fill-gray"><td class="fill-gray"></table><tr><td>1<td>2<td>3<td>4</table> <!-- options with mapped stacking -->`,
          life: `<table class="matrix"><tr><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td class="fill-black"><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table><td><table class="matrix"><tr><td><td><td class="fill-black"><td><tr><td class="fill-black"><td><td><td class="fill-black"><tr><td><td class="fill-black"><td class="fill-black"><td class="fill-black"><tr><td><td><td><td></table><td><table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td class="fill-black"><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table><tr><td>1<td>2<td>3<td>4</table> <!-- options 1-4 mapped with game of life -->`
        },
        wiki: `A cellular automaton consists of a regular grid of cells, each in one of a finite number of states, such as on and off (in contrast to a coupled map lattice). The grid can be in any finite number of dimensions. For each cell, a set of cells called its neighborhood is defined relative to the specified cell. An initial state (time t = 0) is selected by assigning a state for each cell. A new generation is created (advancing t by 1), according to some fixed rule (generally, a mathematical function) that determines the new state of each cell in terms of the current state of the cell and the states of the cells in its neighborhood. Typically, the rule for updating the state of cells is the same for each cell and does not change over time, and is applied to the whole grid simultaneously, though exceptions are known, such as the stochastic cellular automaton and asynchronous cellular automaton. The concept was originally conceived in the 1940s by Stanislaw Ulam and John von Neumann while they were contemporaries at Los Alamos National Laboratory. While studied by some throughout the 1950s and 1960s, it was not until the 1970s and Conway's Game of Life, a two-dimensional cellular automaton, that interest in the subject expanded beyond academia. In the 1980s, Stephen Wolfram engaged in a systematic study of one-dimensional cellular automata, or what he calls elementary cellular automata; his research assistant Matthew Cook showed that one of these rules is Turing-complete. The primary classifications of cellular automata, as outlined by Wolfram, are numbered one to four. They are, in order, automata in which patterns generally stabilize into homogeneity, automata in which patterns evolve into mostly stable or oscillating structures, automata in which patterns evolve in a seemingly chaotic fashion, and automata in which patterns become extremely complex and may last for a long time, with stable local structures. This last class is thought to be computationally universal, or capable of simulating a Turing machine. Special types of cellular automata are reversible, where only a single configuration leads directly to a subsequent one, and totalistic, in which the future value of individual cells only depends on the total value of a group of neighboring cells. Cellular automata can simulate a variety of real-world systems, including biological and chemical ones.`
      }
      let question3Answer1to3 = `<style>.fill-black{background-color:#000}.fill-gray{background-color:#999}</style>
<s>Wow, you suck at this! Your IQ is probably under 1,000,000,000,000<sup>1,000,000,000,000,000,000</sup>!</s><br>
Nice try! Let's learn from this mistake so you don't make it next time!<br><br>
You obviously already understand the fundamental principles of cellular automata, which can be found in various areas including physics, theoretical biology, and microstructure modeling. As a <i>tiny</i> review, <br><br><small>${q3Tables.wiki}</small><br><br>
Great! Now that you have a good understanding of cellular automation, we can map the diamonds, triangles, and circles to live cells, and the squares, stars, and nothing to dead cells. Using the standard rule for conway's game of life(B3/S23), we can now see that the matrix matches the first 8 steps of conway's game of life perfectly:
${q3Tables.matrix.life}

Using the rules of conway's game of life, we can expect that the last cell will look like this:

<table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td class="fill-black"><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table>

Now, let's see what each option looks like when we map the diamonds, triangles, and circles to live cells, and map the squares, stars, and nothing to dead cells:

${q3Tables.options.life}

Only options 1 and 4 meet this.

Let's look at the other pattern here. We will display all shapes as gray, and empty spots as white. If there are 4 vertically stacked cells, we will color them all black instead:
${q3Tables.matrix.stacking}
Here is a list of all four options with any 4 vertically stacked cells colored black:

${q3Tables.options.stacking}

We can analyze the pattern per column.<br>
In the left column:<br>
The first(top) row has 4 vertically stacked cells in the first(left) column. In the second row, the black cells are in the third column. The last row has black cells in between the 1st and 3rd column(the 2nd column)<br>
In the center column:<br>
The first row has black cells in the 4th column. The second row has black cells in the 2nd column. The last row has black cells in the 3rd column, in between the 2nd and 4th column.<br>
In the right column:<br>
The first row has black cells in the 1st column. The second row has black cells in the 3rd column. We can assume that the last row will have black cells in the 2nd column.<br>
Options 2 and 4 match this description.<br>
Since 1 and 4 were valid options according to conway's game of life, <b>#4 is the correct answer</b>`
      // --- DEVELOPER CONFIGURATION AREA ---
      const quizConfig = {
        title: "Secure Centrix81 IQ Test",
        questions: [
          {
            image: "assets/test_1.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: `Your answer is incorrect. Let's count the number of sides in each cell:
<table class="matrix">
  <tr>
    <td>3</td>
    <td>4</td>
    <td>5</td>
  </tr>
  <tr>
    <td>4+3=<br>7</td>
    <td>4+4=<br>8</td>
    <td>4+5=<br>9</td>
  </tr>
  <tr>
    <td>3+3+4=<br>10</td>
    <td>4+4+3=<br>11</td>
    <td>?</td>
  </tr>
</table>
Looking at this table, we can see that the total number of sides increases as you move right. Looking at the bottom row, we can see that the number on the question mark should be 12. This means we need to find shapes whose sides sum to 12. Let's list out the total number of sides for each option:
<ol>
<li>13 total sides</li>
<li>12 total sides</li>
<li>13 total sides</li>
<li>0 total sides</li>
</ol>
The only pattern that has 12 total sides is <b>Option #2</b>` },
              { text: "Option 2", isCorrect: false, feedback: `Your answer is incorrect. Let's count the number of sides for every shape in each row, underlining any new shapes that appear relative to the cell above it.
<table class="matrix">
  <tr>
    <td><u>3</u></td>
    <td><u>4</u></td>
    <td><u>5</u></td>
  </tr>
  <tr>
    <td><u>4</u> + 3</td>
    <td>4 + <u>4</u></td>
    <td><u>4</u> + 5</td>
  </tr>
  <tr>
    <td><u>3</u> + 3 + 4</td>
    <td>4 + 4 + <u>3</u></td>
    <td>?</td>
  </tr>
</table>
As you can see, every cell contains all the shapes above it. In order for the question mark to match this pattern, it must contain at least a 4 sided shape and a 5 sided shape.
<ol>
<li>#1 contains a 3, 4, and 6 sided shape. It does not meet the criteria</li>
<li>#2 contains two 6 sided shapes. It does not meet the criteria</li>
<li>#3 contains a 5 sided shape and two 4 sided shapes. It <u>does</u> meet the criteria</li>
<li>#4 contains three 0 sided shapes. It does not meet the criteria</li>
</ol>
<b>#3 is the correct answer</b>` },
              { text: "Option 3", isCorrect: false, feedback: `Your answer is incorrect. Let's count the number of sides in each cell:
<table class="matrix">
  <tr>
    <td>3</td>
    <td>4</td>
    <td>5</td>
  </tr>
  <tr>
    <td>4+3=<br>7</td>
    <td>4+4=<br>8</td>
    <td>4+5=<br>9</td>
  </tr>
  <tr>
    <td>3+3+4=<br>10</td>
    <td>4+4+3=<br>11</td>
    <td>?</td>
  </tr>
</table>
Looking at this table, we can see that the total number of sides increases as you move right. Looking at the bottom row, we can see that the number on the question mark should be 12. This means we need to find shapes whose sides sum to 12. Let's list out the total number of sides for each option:
<ol>
<li>13 total sides</li>
<li>12 total sides</li>
<li>13 total sides</li>
<li>0 total sides</li>
</ol>
The only pattern that has 12 total sides is <b>Option #2</b>` },
              { text: "Option 4", isCorrect: false, feedback: `Your answer is incorrect. Let's count the number of sides for every shape in each row, underlining any new shapes that appear relative to the cell above it.
<table class="matrix">
  <tr>
    <td><u>3</u></td>
    <td><u>4</u></td>
    <td><u>5</u></td>
  </tr>
  <tr>
    <td><u>4</u> + 3</td>
    <td>4 + <u>4</u></td>
    <td><u>4</u> + 5</td>
  </tr>
  <tr>
    <td><u>3</u> + 3 + 4</td>
    <td>4 + 4 + <u>3</u></td>
    <td>?</td>
  </tr>
</table>
As you can see, every cell contains all the shapes above it. In order for the question mark to match this pattern, it must contain at least a 4 sided shape and a 5 sided shape.
<ol>
<li>#1 contains a 3, 4, and 6 sided shape. It does not meet the criteria</li>
<li>#2 contains two 6 sided shapes. It does not meet the criteria</li>
<li>#3 contains a 5 sided shape and two 4 sided shapes. It <u>does</u> meet the criteria</li>
<li>#4 contains three 0 sided shapes. It does not meet the criteria</li>
</ol>
<b>#3 is the correct answer</b>` }
            ]
          },
          {
            image: "assets/test_2.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: `<style>
  .matrix {
    margin: 15px 0;
    border-collapse: collapse;
  }
  
  .matrix td {
    padding: 5px;
    text-align: center;
    vertical-align: middle;
    border: 1px solid black;
  }
</style>

Your answer is incorrect. Let's focus on the position of the square:
<table class="matrix">
  <tr>
    <td>Right</td>
    <td>Left</td>
    <td>Center</td>
    <td>Right</td>
    <td>Left</td>
    <td>?????</td>
  </tr>
</table>
Now let's focus on the position of the circle:
<table class="matrix">
  <tr>
    <td>Center</td>
    <td>Center</td>
    <td>Right</td>
    <td>Center</td>
    <td>Center</td>
    <td>?????</td>
  </tr>
</table>
As you can see, the square follows a repeating right-left-center pattern while the circle follows a center-center-right pattern. This means that the square will be in the center and the circle will be on the right for the ending pattern.<br>
Now let's count the number of stars in each cell:
<table class="matrix">
  <tr>
    <td>1 star</td>
    <td>1 star</td>
    <td>2 stars</td>
    <td>3 stars</td>
    <td>5 stars</td>
    <td>? stars</td>
  </tr>
</table>
The number of stars in each cell is equal to the sum of the previous two cells. This means that the final cell should have 8 stars.<br>
Let's look at each answer choice:
<ol>
<li>The square and circle don't seem to be positioned anywhere. This is incorrect</li>
<li>The square is in the center, and the circle is on the right. This is correct. However, this does not have 8 stars, making it incorrect.</li>
<li>The square is in the center, and the circle is on the right. This is correct. It also has 8 stars, making it the correct answer.</li>
<li>The square is in the center, and the circle is on the right. This is correct. However, this does not have 8 stars, making it incorrect.</li>
</ol>
<b>#3 is the correct answer</b>` },
              { text: "Option 2", isCorrect: false, feedback: `Your answer is incorrect. Let's focus on the position of the square:
<table class="matrix">
  <tr>
    <td>Right</td>
    <td>Left</td>
    <td>Center</td>
    <td>Right</td>
    <td>Left</td>
    <td>?????</td>
  </tr>
</table>
Now let's focus on the position of the circle:
<table class="matrix">
  <tr>
    <td>Center</td>
    <td>Center</td>
    <td>Right</td>
    <td>Center</td>
    <td>Center</td>
    <td>?????</td>
  </tr>
</table>
Now let's count the number of stars in each cell:
<table class="matrix">
  <tr>
    <td>1 star</td>
    <td>1 star</td>
    <td>2 stars</td>
    <td>3 stars</td>
    <td>5 stars</td>
    <td>? stars</td>
  </tr>
</table>
As you can see, the square follows a repeating right-left-center pattern while the circle follows a center-center-right pattern. This means that the square will be in the center and the circle will be on the right for the ending pattern.<br>
The number of stars in each cell is equal to the sum of the previous two cells. This means that the final cell should have 8 stars.<br>
Let's analyze the number of stars in each answer choice
<ol>
  <li>8 stars. Correct. However, the square is not in the center and the circle is not on the right, making this incorrect.</li>
  <li>7 stars. Incorrect.</li>
  <li>8 stars. Correct.</li>
  <li>4 stars. Incorrect.</li>
</ol>
<b>The correct answer is #3</b>` },
              { text: "Option 3", isCorrect: false, feedback: `Your answer is incorrect. In all given cells, the circle and square are always touching (diagonals included.) This eliminates answer choice #3. Let's count the number of stars in each cell:
<table class="matrix">
  <tr>
    <td>1 star</td>
    <td>1 star</td>
    <td>2 stars</td>
    <td>3 stars</td>
    <td>5 stars</td>
    <td>? stars</td>
  </tr>
</table>
As you can see, the number of stars in each cell is equal to the sum of the previous two cells. This means that the final cell should have 8 stars.
<ol>
  <li>8 stars. Correct.</li>
  <li>7 stars. Incorrect.</li>
  <li>Eliminated (circle and square are not touching)</li>
  <li>4 stars. Incorrect.</li>
</ol>
<b>#1 is the correct answer</b>` },
              { text: "Option 4", isCorrect: false, feedback: `<style>
  .matrix {
    margin: 15px 0;
    border-collapse: collapse;
  }
  
  .matrix td {
    padding: 5px;
    text-align: center;
    vertical-align: middle;
    border: 1px solid black;
  }
</style>

Your answer is incorrect. Let's focus on the position of the square:
<table class="matrix">
  <tr>
    <td>Right</td>
    <td>Left</td>
    <td>Center</td>
    <td>Right</td>
    <td>Left</td>
    <td>?????</td>
  </tr>
</table>
Now let's focus on the position of the circle:
<table class="matrix">
  <tr>
    <td>Center</td>
    <td>Center</td>
    <td>Right</td>
    <td>Center</td>
    <td>Center</td>
    <td>?????</td>
  </tr>
</table>
As you can see, the square follows a repeating right-left-center pattern while the circle follows a center-center-right pattern. This means that the square will be in the center and the circle will be on the right for the ending pattern.<br>
Now let's count the number of stars in each cell:
<table class="matrix">
  <tr>
    <td>1 star</td>
    <td>1 star</td>
    <td>2 stars</td>
    <td>3 stars</td>
    <td>5 stars</td>
    <td>? stars</td>
  </tr>
</table>
The number of stars in each cell is equal to the sum of the previous two cells. This means that the final cell should have 8 stars.<br>
Let's look at each answer choice:
<ol>
<li>The square and circle don't seem to be positioned anywhere. This is incorrect</li>
<li>The square is in the center, and the circle is on the right. This is correct. However, this does not have 8 stars, making it incorrect.</li>
<li>The square is in the center, and the circle is on the right. This is correct. It also has 8 stars, making it the correct answer.</li>
<li>The square is in the center, and the circle is on the right. This is correct. However, this does not have 8 stars, making it incorrect.</li>
</ol>
<b>#3 is the correct answer</b>` }
            ]
          },
          {
            image: "assets/test_3.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: question3Answer1to3 },
              { text: "Option 2", isCorrect: false, feedback: question3Answer1to3 },
              { text: "Option 3", isCorrect: false, feedback: question3Answer1to3 },
              { text: "Option 4", isCorrect: false, feedback: `You obviously have prior knowledge of the fundamental principles of cellular automata, which can be found in various areas including physics, theoretical biology, and microstructure modeling. As a <i>tiny</i> review, <br><br><small>${q3Tables.wiki}</small><br><br>
Great! Now that you have a good understanding of cellular automation, we can map the diamonds, triangles, and circles to live cells, and the squares, stars, and nothing to dead cells. Using the standard rule for conway's game of life(B3/S23), we can now see that the matrix matches the first 8 steps of conway's game of life perfectly:
${q3Tables.matrix.life}

Using the rules of conway's game of life, we can expect that the last cell will look like this:

<table class="matrix"><tr><td><td><td><td><tr><td><td><td><td><tr><td><td><td class="fill-black"><td class="fill-black"><tr><td><td><td class="fill-black"><td class="fill-black"></table>

Now, let's see what each option looks like when we map the diamonds, triangles, and circles to live cells, and map the squares, stars, and nothing to dead cells:

${q3Tables.options.life}

Only options 1 and 4 are valid.<br>

Let's look at the shapes in every square. We can see that every single square will contain at least one diamond, star, square, triangle, and circle.<br>

Option 4 only contains stars and diamonds, meaning it is incorrect<br>
Option 1 contains at least one diamond, star, square, triangle, circle, meaning it is correct <br>
<b>#1 is the correct answer</b>` }
            ]
          }
        ]
      };

      // --- CORE ENGINE ---
      let currentQuestionIndex = 0;
      let score = 0;

      const testImage = document.getElementById('test-image');
      const answerList = document.getElementById('answer-list');
      const feedbackContainer = document.getElementById('feedback-container');
      const feedbackText = document.getElementById('feedback-text');

      function loadQuestion() {
        const q = quizConfig.questions[currentQuestionIndex];
        testImage.src = q.image;
        answerList.innerHTML = "";
        feedbackContainer.classList.add('hidden');

        q.answers.forEach((ans, index) => {
          const li = document.createElement('li');
          li.classList.add('answer-item');
          li.innerText = ans.text;
          li.onclick = () => handleAnswer(ans, li);
          answerList.appendChild(li);
        });
      }

      function handleAnswer(answer, element) {
        // Prevent multiple clicks
        const items = document.querySelectorAll('.answer-item');
        items.forEach(item => item.style.pointerEvents = 'none');

        if (answer.isCorrect) {
          element.classList.add('correct');
          score++;
        } else {
          element.classList.add('incorrect');
        }

        feedbackText.innerHTML = answer.feedback;
        feedbackContainer.classList.remove('hidden');
      }

      function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < quizConfig.questions.length) {
          loadQuestion();
        } else {
          showResults();
        }
      }

      function showResults() {
        document.getElementById('answer-list').classList.add('hidden');
        document.querySelector('.image-wrapper').classList.add('hidden');
        document.getElementById('feedback-container').classList.add('hidden');
        document.getElementById('question-text').classList.add('hidden');

        const scoreBox = document.getElementById('score-container');
        scoreBox.classList.remove('hidden');
        document.getElementById('final-score').innerText = `You got ${score} out of ${quizConfig.questions.length} correct.`;
      }

      // Initialize
      document.getElementById('quiz-title').innerText = quizConfig.title;
      loadQuestion();
    </script>
  </body>
</html>
