<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable IQ Test</title>
    <style>
      body { font-family: sans-serif; background: #f4f4f9; display: flex; justify-content: center; padding: 20px; }
      #quiz-container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 600px; width: 100%; text-align: center; }
      .image-wrapper img { max-width: 100%; height: auto; border: 1px solid #ddd; margin-bottom: 1rem; }
      #answer-list { list-style: none; padding: 0; margin: 20px 0; }
      .answer-item { 
        background: #e7e7ff; padding: 12px; margin-bottom: 8px; border-radius: 4px; 
        cursor: pointer; transition: 0.2s; border: 2px solid transparent;
      }
      .answer-item:hover { background: #d0d0ff; }
      .correct { border-color: #2ecc71; background: #d4efdf !important; }
      .incorrect { border-color: #e74c3c; background: #f2d7d5 !important; }
      .hidden { display: none; }
      #feedback-container { margin-top: 20px; padding: 15px; border-top: 1px solid #eee; }
      #next-btn { background: #3498db; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
    </style>
  </head>
  <body>

    <div id="quiz-container">
      <h1 id="quiz-title">IQ Assessment</h1>

      <!-- Main Image Container -->
      <div class="image-wrapper">
        <img id="test-image" src="" alt="IQ Test Pattern">
      </div>

      <div id="question-text">Select the correct logic:</div>

      <!-- Answer List -->
      <ul id="answer-list"></ul>

      <!-- Feedback Area -->
      <div id="feedback-container" class="hidden">
        <p id="feedback-text"></p>
        <button id="next-btn" onclick="nextQuestion()">Next Question</button>
      </div>

      <div id="score-container" class="hidden">
        <h2>Test Complete!</h2>
        <p id="final-score"></p>
        <button onclick="location.reload()">Restart</button>
      </div>
    </div>

    <script>
      // --- DEVELOPER CONFIGURATION AREA ---
      const quizConfig = {
        title: "Abstract Reasoning Test",
        questions: [
          {
            image: "assets/test_1.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: "For each square, sum the number of sides in each shape. After this, we can see that the total number of sides increases as you move right. Looking at the bottom row, the sum of the number of sides goes from: 10, 11, ?. Answer choice 1 sums to 13, which is not after 11. Looking back at the answer choices, the only valid answer which sums to 12 is <b>#2</b>" },
              { text: "Option 2", isCorrect: false, feedback: "In the first row of the matrix, there is only one shape. In the second row of the matrix, there are only two shapes. In the third row of the matrix, there are only three shapes. Looking at the top left cell, we can see a triangle. That triangle also appears in the cells below. Looking at the top middle cell, we can see a square. That square also appears in the cells below. Looking at the top right cell, we can see a pentagon. That pentagon appears in the cell below, so it should also appear in the hidden cell. This means the only valid answer is <b>#3</b>(the shape in #1 is a hexagon, not a pentagon)" },
              { text: "Option 3", isCorrect: false, feedback: "For each square, sum the number of sides in each shape. After this, we can see that the total number of sides increases as you move right. Looking at the bottom row, the sum of the number of sides goes from: 10, 11, ?. Answer choice 1 sums to 13, which is not after 11. Looking back at the answer choices, the only valid answer which sums to 12 is <b>#2</b>" },
              { text: "Option 4", isCorrect: false, feedback: "Looking at the top left cell, we can see a triangle. That triangle also appears in the cells below. Looking at the top middle cell, we can see a square. That square also appears in the cells below. Looking at the top right cell, we can see a pentagon. That pentagon appears in the cell below, so it should also appear in the hidden cell. This means the only valid answer is <b>#3</b>(the shape in #1 is a hexagon, not a pentagon)" }
            ]
          },
          {
            image: "assets/test_2.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: "You correctly identified the fibonacci sequence in this sequence, but you failed to account for the patterns of the square and circle. The square had a repeating pattern of: right, left, center and the circle had a repeating pattern of center, center, right. The correct ending square should have a square in the center and a circle on the right. The only pattern that accounts for both the fibonacci sequence and the square-circle pattern is <b>#3</b>" },
              { text: "Option 2", isCorrect: false, feedback: "The number of stars in each sequence is equal to the sum of the previous two. This eliminates #2 and #4 and leaves us with #1 and #3. In all 5 given tiles, the square and circle are always touching(diagonals counting). In #3, the square and circle are not touching, which leaves <b>#1</b> as the only correct answer." },
              { text: "Option 3", isCorrect: false, feedback: "You correctly identified the fibonacci sequence in this sequence, but you failed to account for the patterns of the square and circle. In all 5 given tiles, the square and circle are always touching(diagonals counting). The only tile that has the square and circle are not touching while accounting for the fibonacci sequence is <b>#1</b>" },
              { text: "Option 4", isCorrect: false, feedback: "You kind of identified the placement patterns of the square and circle, but if you look closely, the circle has been alternating between center and bottom, which means at the last cell, the circle must be placed at the bottom. This leaves only #2 and #3 valid options. In all 5 given tiles, the square and circle are always touching(diagonals counting). The only tile that has the square and circle are not touching is <b>#2</b>" }
            ]
          },
          {
            image: "assets/test_3.svg",
            answers: [
              { text: "Option 1", isCorrect: false, feedback: "You correctly identified conway's game of life, but there is actually another rule. In the top left cell, we can see that the entire 1st column is filled (diamond, square, circle, square). The middle left cell has its 3rd column filled (square, circle, triangle, diamond). The bottom left cell has the 2nd column filled, which is in between the 1st and 3rd column. In the top center cell, we can see that the entire 4th column is filled, and the center cell has its entire 2nd column filled. The bottom center cell has its 3rd column filled, which is in between the 2nd and 4th column. The only number that accounts for both conway's game of life and the column rule is <b>#4</b>" },
              { text: "Option 2", isCorrect: false, feedback: "You correctly identified that the column to be filled should be the 2nd one, but there is actually another important rule that you missed. This matrix traces the steps of conway's game of life, where a diamond, triangle, or circle represents a live cell, and a empty, square, or start represents a dead cell. A live cell with less than 2 neighbors or more than 3 neighbors dies and survives if there are 2 or 3 neighbors. A dead cell becomes alive if it has exactly 3 neighbors. Using this rule, we can see that the only number that accounts for both conway's game of life and the column rule is <b>#4</b>" },
              { text: "Option 3", isCorrect: false, feedback: "In the top left cell, we can see that the entire 1st column is filled (diamond, square, circle, square). The middle left cell has its 3rd column filled (square, circle, triangle, diamond). The bottom left cell has the 2nd column filled, which is in between the 1st and 3rd column. In the top center cell, we can see that the entire 4th column is filled, and the center cell has its entire 2nd column filled. The bottom center cell has its 3rd column filled, which is in between the 2nd and 4th column. This matrix also traces the steps of conway's game of life, where a diamond, triangle, or circle represents a live cell, and a empty, square, or start represents a dead cell. A live cell with less than 2 neighbors or more than 3 neighbors dies and survives if there are 2 or 3 neighbors. A dead cell becomes alive if it has exactly 3 neighbors. Using this rule, we can see that the only number that accounts for both conway's game of life and the column rule is <b>#4</b>" },
              { text: "Option 4", isCorrect: false, feedback: "You correctly identified the patterns in conway's game of life. However, there is another rule you forgot to account for. In every cell, there is always at least one square, star, diamond, triangle, and circle. In this cell, there are no squares, triangles, or circles. The only other rule correctly identifies conway's game of life is <b>#1</b>" }
            ]
          }
        ]
      };

      // --- CORE ENGINE ---
      let currentQuestionIndex = 0;
      let score = 0;

      const testImage = document.getElementById('test-image');
      const answerList = document.getElementById('answer-list');
      const feedbackContainer = document.getElementById('feedback-container');
      const feedbackText = document.getElementById('feedback-text');

      function loadQuestion() {
        const q = quizConfig.questions[currentQuestionIndex];
        testImage.src = q.image;
        answerList.innerHTML = "";
        feedbackContainer.classList.add('hidden');

        q.answers.forEach((ans, index) => {
          const li = document.createElement('li');
          li.classList.add('answer-item');
          li.innerText = ans.text;
          li.onclick = () => handleAnswer(ans, li);
          answerList.appendChild(li);
        });
      }

      function handleAnswer(answer, element) {
        // Prevent multiple clicks
        const items = document.querySelectorAll('.answer-item');
        items.forEach(item => item.style.pointerEvents = 'none');

        if (answer.isCorrect) {
          element.classList.add('correct');
          score++;
        } else {
          element.classList.add('incorrect');
        }

        feedbackText.innerText = answer.feedback;
        feedbackContainer.classList.remove('hidden');
      }

      function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < quizConfig.questions.length) {
          loadQuestion();
        } else {
          showResults();
        }
      }

      function showResults() {
        document.getElementById('answer-list').classList.add('hidden');
        document.querySelector('.image-wrapper').classList.add('hidden');
        document.getElementById('feedback-container').classList.add('hidden');
        document.getElementById('question-text').classList.add('hidden');

        const scoreBox = document.getElementById('score-container');
        scoreBox.classList.remove('hidden');
        document.getElementById('final-score').innerText = `You got ${score} out of ${quizConfig.questions.length} correct.`;
      }

      // Initialize
      document.getElementById('quiz-title').innerText = quizConfig.title;
      loadQuestion();
    </script>
  </body>
</html>
